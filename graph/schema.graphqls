# GraphQL schema example
#
# https://gqlgen.com/getting-started/

scalar Time

type User {
  id: ID!
  username: String!
  karma: Int!
}

type Post {
  id: ID!
  userId: ID!
  content: String!
  isFlagged: String!
  numberOfVotes: Int!
  numberOfComments: Int!
  location: String!
  longitude: Float!
  latitude: Float!
  createdAt: Time!
}

type Comment {
  id: ID!
  userId: ID!
  postId: ID!
  content: String!
  numberOfVotes: Int!
  isFlagged: Boolean!
  orderIndex: Int!
  createdAt: Time!
}

type PostConnection {
  edges: [Post!]!
  pageInfo: PageInfo!
}

type PageInfo {
  hasNextPage: Boolean!
  endCursor: Time!
}

type Query {
  posts(cursor: Time, limit: Int): PostConnection!
  post(id: ID!): Post!
  comments(postId: ID!): [Comment!]!
}

type Mutation {
  register(input: NewUser!): String!
  login(input: NewUser!): String!
  newPost(input: NewPost!): Post!
  newComment(input: NewComment): Comment!
}

input NewUser {
  username: String!
  password: String!
}

input NewPost {
  content: String!
  longitude: Float!
  latitude: Float!
}

input NewComment {
  postId: ID!
  content: String!
  longitude: Float!
  latitude: Float!
}
